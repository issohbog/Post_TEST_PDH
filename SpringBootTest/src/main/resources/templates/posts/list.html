<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
    <h1>게시글 목록</h1>
    <div>
        <a href="/posts/create">글쓰기</a>
    </div>

    <table border="1">
        <tr>
            <th width="50">번호</th>
            <th width="320">제목</th>
            <th width="200">작성자</th>
            <th width="200">등록일자</th>
        </tr>
        <th:block th:if="${ list == null || list.isEmpty() }">
            <th>
                <td colspan="4" align="center">조회된 데이터가 없습니다.</td>
            </th>
        </th:block>
        <th:block th:each=" post : ${list}">
            <tr>
                <td><th:block th:text="${post.no}"></th:block></td>
                <td>
                    <!-- 방법1 : |문자열+표현식| : 문자열 결합 방식 -->
                    <a th:href="|/posts/read/${post.no}|" th:text="${post.title}"></a>
                    
                    <!-- 방법2 : @{URL/{변수}(변수=${값})} : URL 바인딩 방식(PathVariable) -->
                    <!-- <a th:href="@{/posts/read/{no}(no=${post.no})}" th:text="${post.title}"></a> -->

                </td>
                <td><th:block th:text="${post.writer}"></th:block></td>
                <td><th:block th:text="${ #dates.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></th:block></td>
            </tr>
        </th:block>
    </table>

            <!-- 페이지 번호 -->
        <nav aria-label="Page navigation" class="d-flex justify-content-center" th:object="${pagination}">
            <ul class="pagination">
                <!-- [첫] -->
                <li class="page-item">
                    <!-- <a class="page-link" th:href="@{ /posts/list(page=*{first}, size=*{size}, count=*{count}) }" aria-label="First">
                        <span aria-hidden="true">&laquo;</span>
                    </a> -->
                    <a class="page-link" th:href="@{ ${pageUri} + '&page=' + *{first} }" aria-label="First">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <!-- [이전] -->
                <li class="page-item" th:if="${pagination.page != pagination.first}">
                    <a class="page-link" th:href="@{ ${pageUri} + '&page=' + *{prev} }" aria-label="Previous">
                        <span aria-hidden="true">&lsaquo;</span>
                    </a>
                </li>
                <th:block th:each="page : *{ #numbers.sequence( start, end )}">
                    <li class="page-item" th:classappend="${ pagination.page == page} ? 'active' : '' ">
                        <a class="page-link" th:href="@{ ${pageUri} + '&page=' + ${page} }" th:text="${page}">1</a>
                    </li>
                </th:block>
                <!-- [다음] -->
                <li class="page-item" th:if="${pagination.page != pagination.last}">
                    <a class="page-link" th:href="@{ ${pageUri} + '&page=' + *{next} }" aria-label="Next">
                        <span aria-hidden="true">&rsaquo;</span>
                    </a>
                </li>
                <!-- 마지막 -->
                <li class="page-item">
                    <a class="page-link" th:href="@{ ${pageUri} + '&page=' + *{last} }" aria-label="Last">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</body>
</html>